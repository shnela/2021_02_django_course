# Start API - Autogenerated endpoints

## New model layout
**Drop all tables from db**
* [customers/models.py](../battlefield/gsm_provider/customers/models.py)
* [billings/models.py](../battlefield/gsm_provider/billings/models.py)

[ForeignKey arguments]


## [Class-based Views]
[Don't repeat yourself]

File: [customers/api.py](../battlefield/gsm_provider/customers/api.py)

## Exercise:

### Prepare `APIView` classes
Prepare class views:
* `class CustomerList(APIView):`
* `class CustomerDetail(APIView):`

Hint:
* Just replace if blocks with `get`, `post` etc functions.
* Remember about url dispatcher change: `CustomerList.as_view()` in
[customers/api_urls.py](../battlefield/gsm_provider/customers/api_urls.py)

### Rewrite models with mixins
https://www.django-rest-framework.org/tutorial/3-class-based-views/#using-mixins

### And finally use
https://www.django-rest-framework.org/tutorial/3-class-based-views/#using-generic-class-based-views

Hint:
* Change `user_id` parameter to `pk` in urls.

<!-- links -->
[Class-based Views]: https://www.django-rest-framework.org/tutorial/3-class-based-views/#tutorial-3-class-based-views
[Don't repeat yourself]: https://en.wikipedia.org/wiki/Don't_repeat_yourself
[ForeignKey arguments]: https://docs.djangoproject.com/en/3.1/ref/models/fields/#arguments
